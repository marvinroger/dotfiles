- defaults:
    link:
      relink: true

- clean: ["~"]

- link:
    ~/.config/fish: ./src/config/fish
    ~/.ssh: ./src/ssh
    ~/.gnupg: ./src/gnupg
    ~/.gitconfig: ./src/gitconfig
    ~/.gitignore_global: ./src/gitignore_global
    ~/.profile: ./src/profile
    ~/Library/LaunchAgents/homebrew.gpg.gpg-agent.plist: ./src/mac/LaunchAgents/homebrew.gpg.gpg-agent.plist
    ~/Library/LaunchAgents/link-ssh-auth-sock.plist: ./src/mac/LaunchAgents/link-ssh-auth-sock.plist

    ~/.ssh/id_rsa: ./secrets/id_rsa

- shell:
    - [git submodule update --init --recursive, Installing submodules]
    - [chmod 700 ~/.ssh && chmod 600 ~/.ssh/id_rsa && chmod 644 ~/.ssh/id_rsa.pub, Chmoding ssh]
    - [chmod 700 ~/.gnupg && chmod 600 ~/.gnupg/*, Chmoding gnupg]
    - [ssh-add -K ~/.ssh/id_rsa, Adding ssh key to agent]
    - [launchctl load -F ~/Library/LaunchAgents/homebrew.gpg.gpg-agent.plist, Load gpg-agent plist]
    - [launchctl load -F ~/Library/LaunchAgents/link-ssh-auth-sock.plist, Load gpg-agent SSH_AUTH_SOCK override plist]
